version: 1.0.{build}
image: Visual Studio 2013
platform: x64
configuration: Release
clone_depth: 1
environment:
  matrix:
   PACKAGES_MATRIX
##Only for qglviewer
#init:
#  - call "C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\vcvarsall.bat" %platform%
install:
    -  set "CONDA_ROOT=C:\Miniconda36-x64"
    -  set "PATH=%CONDA_ROOT%;%CONDA_ROOT%\Scripts;%CONDA_ROOT%\Library\bin;;C:\Qt\5.6\msvc2013_64\bin;%PATH%"
    -  set "BOOST_ROOT=C:\Libraries/boost"
    -  conda install -y -c conda-forge cmake mpfr zlib eigen
    -  conda install -y -c anaconda-nb-extensions gmp

before_build:
- cmd:
- cd C:\projects\cgal\ && mkdir build && cd build && cmake -DCGAL_HEADER_ONLY=ON -DCMAKE_CXX_FLAGS_RELEASE=-DCGAL_NDEBUG .. && cmake --build . && cmake --build . --target install

build_script:
- cd C:\projects\cgal\.travis
- C:\Cygwin\bin\bash.exe -x -e build_package.sh %PACKAGE%
